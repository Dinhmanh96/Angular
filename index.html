<!DOCTYPE html>
<html>
<head>
	<title>MyApp</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
	
</head>
<body>
	<div class="container">
		<div ng-app="myApp" ng-controller="myCtrl" class="row">
			<div class="col-xs-4 listusers">
				<h2>Add User</h2>
				<input class="form-control search" type="text" name="search" ng-model="input">
				<button ng-click="search()" class="btn btn-sm">Search</button>
				<div class="listusers-content">
					<p ng-repeat="x in users | filter : y">{{x.name}} <input id={{x.id}} type="checkbox" ng-model="x.checked" ng-click="clickusers(x)"></p>
				</div>
				<button ng-click="addusers()" class="btn btn-md addusers">Add to User List</button>
			</div>

			<div class="col-sm-8">
			<h2>Scenarino Name</h2>
			<h3>Users list</h3>
				<table class="table table-striped table-hover">
					<tr ng-repeat="x in listusers">
						<td >{{x.name}}</td>
						<td>
							<button ng-click="undo(x)" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						</td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<script>
		var app = angular.module("myApp", []);
		app.controller("myCtrl", function($scope) {
			$scope.temp = [];
		    $scope.users = [
		    	{id: '1', name: 'user 1'},
		    	{id: '2', name: 'user 2'},
		    	{id: '3', name: 'user 3'},
		    	{id: '4', name: 'user 4'},
		    	{id: '5', name: 'user 5'},
		    	{id: '6', name: 'user 6'},
		    	{id: '7', name: 'user 7'},
		    	{id: '8', name: 'user 8'},
		    	{id: '9', name: 'user 9'},
		    	{id: '10', name: 'user 10'},
		    	{id: '11', name: 'user 11'},
		    	{id: '12', name: 'user 12'},
		    ];
		    $scope.listusers = [
		    ];
		    $scope.search= function(){
		    	$scope.y = $scope.input;
		    }

		    $scope.clickusers = function(x){
		    		
		   			if (x.checked == true) {
		   				$scope.temp.push({id: x.id,name: x.name});
		   			}else{                            
		   				var i=0;                            
		   				while(i < $scope.temp.length){                                
		   					if($scope.temp[i].name==x.name){                                    
		   						$scope.temp.splice(i, 1);                                
		   					}                                
		   					i ++;                            
		   				}                        
		   			}
		    }
		    $scope.addusers = function(){
		    	$scope.listusers = $scope.listusers.concat($scope.temp);

		    	for (var i = 0; i < $scope.temp.length; i++) {
		    		for (var j = 0; j < $scope.users.length; j++) {
		    			if ($scope.users[j].id == $scope.temp[i].id) {
		    				$scope.users.splice(j,1);
		    			}			
		    		}
		    	}
		    	$scope.temp.splice(0,$scope.temp.length);
		    }
		    $scope.undo = function(x){
		    	$scope.users.push({id: x.id,name: x.name})
		    	for (var j = 0; j < $scope.listusers.length; j++) {
		    			if ($scope.listusers[j].id == x.id) {
		    				$scope.listusers.splice(j,1);

		    			}			
		    		}
		    }
		});
	</script>
</body>
</html>